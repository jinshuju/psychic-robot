name: what to eat

on:
  schedule:
    - cron:  '45 3 * * 1-5'
  workflow_dispatch: 

jobs:
  webhook-call:
    runs-on: ubuntu-latest
    steps:
      - name: show date
        run: date
      - name: cURL request
        run: |
          opts=("é£Ÿå ‚" "ç‰›è‚‰é¢" "æ³¡é¦" "è‡Šå­é¢" "è èœé¢" "711" "é­å®¶" "KFC" "æ±‰å ¡ç‹" "å·å‡‰çš®")
          food=${opts[$RANDOM % ${#opts[@]} ]}
          weather=$(curl -H "Accept-Language: zh-cn" wttr.in/Xi\'an\?0ATF)
          curl --request POST \
          --url https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=${{ secrets.ENT_BOT_TOKEN }} \
          --header "content-type: application/json" \
          --data "{
              \"msgtype\": \"text\",
              \"text\": {
                 \"content\": \"${weather}\n\n ğŸš ä»Šå¤©åƒ: ${food}\"
              }
            }"

